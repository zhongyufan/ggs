<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>路由</title>
</head>

<body>
	<!-- history -->
	<article>
		<a href="" class="api a">a.html</a>
		<a href="" class="api b">b.html</a>
		<script type="text/javascript">
			// 注册路由
			document.querySelectorAll('.api').forEach(item => {
				item.addEventListener('click', (e) => {
					e.preventDefault();
					let link = item.textContent;
					window.history.pushState({
						name: 'api'
					}, link, '#' + link);
				}, false)
			})
			// 监听路由
			window.addEventListener('popstate', (e) => {
				console.log({
					location: location.href,
					state: e.state
				})
			}, false);
		</script>
	</article>
	<!-- hash -->
	<article>
		<a href="" class="hash a">#a.html</a>
		<a href="" class="hash b">#b.html</a>
		<script type="text/javascript">
			// 注册路由
			document.querySelectorAll('.hash').forEach(item => {
				item.addEventListener('click', (e) => {
					e.preventDefault();
					let link = item.textContent;
					location.hash = link;
				}, false);
			});
			// 监听路由
			window.addEventListener('hashchange', (e) => {
				console.log({
					location: location.href,
					hash: location.hash
				})
			}, false);
		</script>
	</article>
	<!-- hash分析 -->
	<article>
		<a href="" class="easy a">!a.html</a>
		<a href="" class="easy b">!b.html</a>
		<script type="text/javascript">
			// 注册路由
			document.querySelectorAll('.easy').forEach(item => {
				item.addEventListener('click', (e) => {
					e.preventDefault(); // 浏览器不要执行与事件关联的默认动作
					let link = item.textContent;
					location.hash = link; // location.hash -> 返回一个 URL 的主要部分
					alert(link);
				})
			});
			// 监听路由
			window.addEventListener('hashchange', (e) => { // hashchange -> 锚部分发生改变时触发
				console.log({
					location: location.href,
					hash: location.hash,
				})
			});
		</script>
	</article>
	<!-- 原来如此，这两个API都是告诉浏览器改了url -->
</body>

</html>